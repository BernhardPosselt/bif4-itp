// Generated by CoffeeScript 1.3.3
(function() {
  var Main, WebChat;

  WebChat = window.WebChat;

  $(document).ready(function() {
    var main;
    main = new Main();
    main.initWebsocket();
    main.registerController('[ng-controller=ChannelController]');
    return main.distributor.notifyController({
      type: "channel",
      action: "update",
      data: {
        id: 0,
        name: "test"
      }
    });
  });

  Main = (function() {

    function Main() {
      this.distributor = new WebChat.Distributor();
      this.distributor.setCache(new WebChat.Cache());
    }

    Main.prototype.registerController = function(selector) {
      return this.distributor.registerController($(selector)[0]);
    };

    Main.prototype.initWebsocket = function(e) {
      this.websocket = new WebChat.WebSocket();
      this.websocket.connect();
      return this.websocket.onReceive(this.distributor.notifyController);
    };

    return Main;

  })();

}).call(this);
