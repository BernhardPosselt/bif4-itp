// Generated by CoffeeScript 1.3.3

$(document).ready(function() {
  var fade_out_visible_divs, filter_table_rows, load_admin_divs;
  load_admin_divs = function(hash) {
    switch (hash) {
      case "#users":
        return fade_out_visible_divs($("#admin_site_users"));
      case "#groups":
        return fade_out_visible_divs($("#admin_site_groups"));
      case "#channels":
        return fade_out_visible_divs($("#admin_site_channels"));
      case "#files":
        return fade_out_visible_divs($("#admin_site_files"));
    }
  };
  fade_out_visible_divs = function(fadeInElement) {
    return $("#admin_site > div:visible").fadeOut("fast", function() {
      return fadeInElement.fadeIn();
    });
  };
  filter_table_rows = function(search_string) {
    return $("#admin_site > div:visible .data_table tbody tr").each(function() {
      var visible;
      visible = false;
      $(this).children("td").each(function() {
        if ($(this).html().toLowerCase().indexOf(search_string.toLowerCase()) !== -1) {
          return visible = true;
        }
      });
      if (visible) {
        return $(this).show();
      } else {
        return $(this).hide();
      }
    });
  };
  if (window.location.hash) {
    load_admin_divs(window.location.hash);
  }
  $("#admin_tabs #admin_tabs_users").click(function() {
    return load_admin_divs("#users");
  });
  $("#admin_tabs #admin_tabs_groups").click(function() {
    return load_admin_divs("#groups");
  });
  $("#admin_tabs #admin_tabs_channels").click(function() {
    return load_admin_divs("#channels");
  });
  $("#admin_tabs #admin_tabs_files").click(function() {
    return load_admin_divs("#files");
  });
  $(".searchbox").keyup(function() {
    return filter_table_rows($(this).val());
  });
  $("#admin_site .data_table").tablesorter();
  $("#admin_site_users .actions .filter_groups").change(function() {
    var data;
    data = {
      groups: $("#admin_site_users .actions .filter_groups").val(),
      channels: $("#admin_site_users .actions .filter_channels").val()
    };
    return $("#admin_site_users .data_table tbody").load("/admin/ajax/users/", data, function() {
      return $("#admin_site .data_table:visible").trigger("update");
    });
  });
  $("#admin_site_users .actions .filter_channels").change(function() {
    var data;
    data = {
      groups: $("#admin_site_users .actions .filter_groups").val(),
      channels: $("#admin_site_users .actions .filter_channels").val()
    };
    return $("#admin_site_users .data_table tbody").load("/admin/ajax/users/", data, function() {
      return $("#admin_site .data_table:visible").trigger("update");
    });
  });
  $("#admin_site_groups .actions .filter_channels").change(function() {
    var data;
    data = {
      users: $("#admin_site_groups .actions .filter_users").val(),
      channels: $("#admin_site_groups .actions .filter_channels").val()
    };
    return $("#admin_site_groups .data_table tbody").load("/admin/ajax/groups/", data, function() {
      return $("#admin_site .data_table:visible").trigger("update");
    });
  });
  $("#admin_site_groups .actions .filter_users").change(function() {
    var data;
    data = {
      users: $("#admin_site_groups .actions .filter_users").val(),
      channels: $("#admin_site_users .actions .filter_channels").val()
    };
    return $("#admin_site_groups .data_table tbody").load("/admin/ajax/groups/", data, function() {
      return $("#admin_site .data_table:visible").trigger("update");
    });
  });
  $("#admin_site_channels .actions .filter_groups").change(function() {
    var data;
    data = {
      groups: $("#admin_site_channels .actions .filter_groups").val()
    };
    return $("#admin_site_channels .data_table tbody").load("/admin/ajax/channels/", data, function() {
      return $("#admin_site .data_table:visible").trigger("update");
    });
  });
  return $("#admin_site_files .actions .filter_channels").change(function() {
    var data;
    data = {
      channels: $("#admin_site_files .actions .filter_channels").val()
    };
    return $("#admin_site_files .data_table tbody").load("/admin/ajax/files/", data, function() {
      return $("#admin_site .data_table:visible").trigger("update");
    });
  });
});
